webpackJsonp(["tnew-state-filter"],{"./V7/tnew/lib/StateFilter.js":function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=(0,d.default)("div[data-control-group-for='"+t+"']");return{$group:e,$input:e.find("input, select"),$label:e.find("label"),$requiredMessage:(0,d.default)('<small class="tn-required-field pull-right">Required</small>')}}Object.defineProperty(e,"__esModule",{value:!0});var a=i("./node_modules/babel-runtime/helpers/classCallCheck.js"),r=s(a),u=i("./node_modules/babel-runtime/helpers/createClass.js"),l=s(u),n=i("./node_modules/@tnwebpro/jquery/dist/jquery.js-exposed"),d=s(n),c=function(){function t(e){(0,r.default)(this,t),this.states=e.states,this.countries=e.countries,this.$countrySelect=(0,d.default)(e.country),this.$stateSelect=(0,d.default)(e.state);var i=this.$stateSelect.attr("name"),s=(0,d.default)(e.postalCode).attr("name"),a=(0,d.default)(e.city).attr("name");this.controlGroups={state:o(i),postalCode:o(s),city:o(a)};var u=this.$countrySelect.val(),l=this.getCountry(u),n=this.$stateSelect.val();this.updateStateListDisplay(l),this.toggleControlGroupRequired(l.isCityRequired,this.controlGroups.city),this.toggleControlGroupRequired(l.isPostalCodeRequired,this.controlGroups.postalCode),this.loadStateListData(l),this.setStateDefault(n),this.$countrySelect.on("change",this.countryChanged.bind(this))}return(0,l.default)(t,[{key:"getCountry",value:function(t){return this.countries.find(function(e){return e.id.toString()===t})}},{key:"clearStateList",value:function(){this.$stateSelect[0].options.length=0}},{key:"revalidateStateField",value:function(){this.$stateSelect.blur()}},{key:"populateStateList",value:function(t){var e=this.$stateSelect[0];e.options.length=0,e.options.add(new Option("","")),this.states.forEach(function(i){i.countryId===t&&e.options.add(new Option(i.description,i.shortDescription))})}},{key:"hideStateList",value:function(){this.controlGroups.state.$group.hide()}},{key:"showStateList",value:function(){this.controlGroups.state.$group.show()}},{key:"setStateDefault",value:function(t){this.$stateSelect.val(t)}},{key:"toggleControlGroupRequired",value:function(t,e){var i=e.$input,s=e.$label,o=e.$requiredMessage;o.remove(),t?(o.insertAfter(s[0]),i.attr("data-tn-required","true")):i.removeAttr("data-tn-required")}},{key:"updateStateListDisplay",value:function(t){t.hasStates?this.showStateList():this.hideStateList(),this.toggleControlGroupRequired(t.isStateRequired,this.controlGroups.state)}},{key:"loadStateListData",value:function(t){t.hasStates?this.populateStateList(t.id):this.clearStateList()}},{key:"countryChanged",value:function(){var t=this.$countrySelect.val();if(t>0){var e=this.getCountry(t);this.loadStateListData(e),this.updateStateListDisplay(e),this.toggleControlGroupRequired(e.isCityRequired,this.controlGroups.city),this.toggleControlGroupRequired(e.isPostalCodeRequired,this.controlGroups.postalCode)}}}]),t}();e.default=c}});
//# sourceMappingURL=tnew-state-filter.140d9b23c5e17657e343.js.map